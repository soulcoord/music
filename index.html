<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monochrome Music Player</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-art" id="bgArt" aria-hidden="true"></div>
  <canvas id="visualizer" class="visualizer-canvas"></canvas>
  <div class="wrap" id="dropzone">
<div class="player" role="region" aria-label="單色音樂播放器">
  <header class="player-header">
    <div class="player-brand"><i class="fa-solid fa-waveform-lines"></i> Monochrome Player</div>
  </header>
  <div class="player-body">
    <section class="left-pane" aria-label="歌詞與播放清單">
      <header class="track-head">
        <div class="track-title-compact" id="trackTitle">請選擇歌曲</div>
        <div class="track-artist-compact" id="trackArtist">上傳 MP3 或拖放檔案進來</div>
      </header>
      <div class="context-card">
        <div class="context-tabs" role="tablist" aria-label="內容切換">
          <button class="context-tab active" type="button" id="lyricsTabBtn" role="tab" aria-selected="true" aria-controls="lyricsPanel"><i class="fa-solid fa-microphone-lines"></i> 歌詞</button>
          <button class="context-tab" type="button" id="queueTabBtn" role="tab" aria-selected="false" aria-controls="queuePanel"><i class="fa-solid fa-list"></i> 清單</button>
          <button class="context-tab" type="button" id="eqTabBtn" role="tab" aria-selected="false" aria-controls="eqPanel"><i class="fa-solid fa-sliders"></i> 等化器</button>
        </div>
        <div class="context-panels">
          <div class="context-panel active" id="lyricsPanel" role="tabpanel" aria-labelledby="lyricsTabBtn">
            <div class="lyrics-fixed">
              <div class="lyrics-content" id="lyricsContent"><span class="lyrics-empty">尚未載入歌詞</span></div>
            </div>
          </div>
          <div class="context-panel" id="queuePanel" role="tabpanel" aria-labelledby="queueTabBtn" aria-hidden="true">
            <div class="playlist" id="playlist" aria-label="播放清單"></div>
          </div>
          <div class="context-panel" id="eqPanel" role="tabpanel" aria-labelledby="eqTabBtn" aria-hidden="true">
            <div class="eq-container">
              <div class="eq-presets">
                <select id="eqPresets" aria-label="等化器預設">
                  <option value="flat">原聲 (Flat)</option>
                  <option value="bass">低音增強 (Bass)</option>
                  <option value="pop">流行 (Pop)</option>
                  <option value="rock">搖滾 (Rock)</option>
                  <option value="jazz">爵士 (Jazz)</option>
                  <option value="vocal">人聲 (Vocal)</option>
                </select>
              </div>
              <div class="eq-sliders">
                <!-- 60Hz, 230Hz, 910Hz, 4kHz, 14kHz -->
                <div class="eq-band">
                  <input type="range" class="eq-slider" min="-12" max="12" step="0.1" value="0" data-freq="60">
                  <span class="eq-label">60Hz</span>
                </div>
                <div class="eq-band">
                  <input type="range" class="eq-slider" min="-12" max="12" step="0.1" value="0" data-freq="230">
                  <span class="eq-label">230Hz</span>
                </div>
                <div class="eq-band">
                  <input type="range" class="eq-slider" min="-12" max="12" step="0.1" value="0" data-freq="910">
                  <span class="eq-label">910Hz</span>
                </div>
                <div class="eq-band">
                  <input type="range" class="eq-slider" min="-12" max="12" step="0.1" value="0" data-freq="4000">
                  <span class="eq-label">4kHz</span>
                </div>
                <div class="eq-band">
                  <input type="range" class="eq-slider" min="-12" max="12" step="0.1" value="0" data-freq="14000">
                  <span class="eq-label">14kHz</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="right-pane" aria-label="播放控制與唱片">
      <div class="turntable">
        <div class="record-wrap">
          <div class="record" id="vinyl">
            <div class="record-groove"></div>
            <div class="record-label" id="albumCover"></div>
          </div>
          <div class="status-badge" id="statusBadge"><i class="fa-solid fa-circle" style="font-size:6px"></i> 待機中</div>
        </div>
      </div>
      <div class="progress-row compact">
        <div class="time" id="currentTime">0:00</div>
        <div class="progress-bar" id="progressBar" role="slider" aria-label="播放進度" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
          <div class="progress-fill" id="progressFill"></div>
          <div class="progress-thumb" id="progressThumb"></div>
          <div class="progress-tooltip" id="progressTooltip">0:00</div>
        </div>
        <div class="time" id="totalTime">0:00</div>
      </div>
      <div class="controls desktop-controls" aria-label="播放控制">
        <div class="main-controls">
          <button class="control-btn ghost" id="prevBtn" title="上一首 (P)"><i class="fa-solid fa-backward-step"></i></button>
          <button class="control-btn primary" id="playBtn" aria-pressed="false" title="播放/暫停 (空格)"><i class="fa-solid fa-play"></i></button>
          <button class="control-btn ghost" id="nextBtn" title="下一首 (N)"><i class="fa-solid fa-forward-step"></i></button>
        </div>
<div class="tool-controls">
  <button class="control-icon" id="favoriteToggleBtn" aria-pressed="false" title="加入最愛">
    <i class="fa-regular fa-heart"></i>
  </button>
  <button class="control-icon" id="shuffleBtn" aria-pressed="false" title="隨機 (S)">
    <i class="fa-solid fa-shuffle"></i>
  </button>
  <button class="control-icon" id="repeatBtn" aria-pressed="false" title="循環 (R)">
    <i class="fa-solid fa-repeat"></i>
  </button>
  <button class="control-icon" id="shortcutsBtn" title="鍵盤快捷鍵 (?)">
    <i class="fa-solid fa-keyboard"></i>
  </button>
</div>

      </div>
  <div class="mobile-progress-container">
    <div class="mobile-progress-row">
      <div class="mobile-time" id="mobileCurrentTime">0:00</div>
      <div class="mobile-progress-bar" id="mobileProgressBar" role="slider" aria-label="播放進度" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
        <div class="mobile-progress-fill" id="mobileProgressFill"></div>
        <div class="mobile-progress-thumb" id="mobileProgressThumb"></div>
      </div>
      <div class="mobile-time" id="mobileTotalTime">0:00</div>
    </div>
  </div>
      <div class="controls mobile-controls" aria-label="播放控制">
        <button class="control-icon" id="shuffleBtnMobile" title="隨機"><i class="fa-solid fa-shuffle"></i></button>
        <button class="control-btn ghost" id="prevBtnMobile" title="上一首"><i class="fa-solid fa-backward-step"></i></button>
        <button class="control-btn primary" id="playBtnMobile" aria-pressed="false" title="播放/暫停"><i class="fa-solid fa-play"></i></button>
        <button class="control-btn ghost" id="nextBtnMobile" title="下一首"><i class="fa-solid fa-forward-step"></i></button>
        <button class="control-icon" id="repeatBtnMobile" title="循環"><i class="fa-solid fa-repeat"></i></button>
      </div>

      <div class="volume-row">
        <i class="fa-solid fa-volume-high volume-icon" id="volumeIcon" title="靜音 (M)"></i>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="0.7" aria-label="音量調整" />
      </div>
<div class="volume-row">
  <label for="playbackSpeedSelect" style="font-size:0.9rem; margin-right:6px;">速度</label>
  <select id="playbackSpeedSelect">
    <option value="0.5">0.5×</option>
    <option value="0.75">0.75×</option>
    <option value="1" selected>1×</option>
    <option value="1.25">1.25×</option>
    <option value="1.5">1.5×</option>
    <option value="2">2×</option>
  </select>
</div>

<div class="sleep-timer-row">
  <label style="font-size:0.9rem;">睡眠定時器</label>
  <button id="sleepTimerBtn" aria-pressed="false">未啟用</button>
  <span id="sleepTimerStatus" style="font-size:0.85rem; color:var(--muted); flex:1; text-align:right;">
    點擊按鈕循環切換 15/30/60 分鐘
  </span>
</div>
      <div class="upload-section">
        <label class="upload-btn" for="fileInput"><i class="fa-solid fa-upload"></i> 上傳歌曲</label>
        <div class="drop-zone" id="dropZone" role="button" tabindex="0">或將檔案拖放到此處（支援多檔）</div>
      </div>
      <p class="upload-hint">拖放檔案即可建立播放清單，系統會自動保存於此裝置。</p>
    </section>
  </div>
</div>
<div class="mini-player" id="miniPlayer">
    <div class="mini-cover" id="miniCover"></div>
    <div class="mini-info">
      <div class="mini-title" id="miniTitle">—</div>
      <div class="mini-artist" id="miniArtist">—</div>
    </div>
    <div class="mini-controls">
      <button class="mini-btn" id="miniPrevBtn" aria-label="上一首" title="上一首"><i class="fa-solid fa-backward-step"></i></button>
      <button class="mini-btn" id="miniPlayBtn" aria-label="播放/暫停" title="播放/暫停"><i class="fa-solid fa-play"></i></button>
      <button class="mini-btn" id="miniNextBtn" aria-label="下一首" title="下一首"><i class="fa-solid fa-forward-step"></i></button>
    </div>
  </div>
  <div class="notifications" id="notifications"></div>

  <dialog id="shortcutsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>鍵盤快捷鍵</h3>
        <button class="close-modal-btn" id="closeShortcutsBtn"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="shortcuts-grid">
        <div class="shortcut-item"><span class="key">Space</span> <span class="desc">播放 / 暫停</span></div>
        <div class="shortcut-item"><span class="key">←</span> <span class="desc">倒轉 10 秒</span></div>
        <div class="shortcut-item"><span class="key">→</span> <span class="desc">快進 10 秒</span></div>
        <div class="shortcut-item"><span class="key">↑</span> <span class="desc">增加音量</span></div>
        <div class="shortcut-item"><span class="key">↓</span> <span class="desc">減少音量</span></div>
        <div class="shortcut-item"><span class="key">N</span> <span class="desc">下一首</span></div>
        <div class="shortcut-item"><span class="key">P</span> <span class="desc">上一首</span></div>
        <div class="shortcut-item"><span class="key">S</span> <span class="desc">隨機播放開關</span></div>
        <div class="shortcut-item"><span class="key">R</span> <span class="desc">循環模式切換</span></div>
        <div class="shortcut-item"><span class="key">M</span> <span class="desc">靜音 / 恢復</span></div>
      </div>
    </div>
  </dialog>

  <input type="file" id="fileInput" accept="audio/*" multiple hidden>
  <audio id="audioPlayer" crossorigin="anonymous"></audio>
  <script src="https://cdn.jsdelivr.net/npm/jsmediatags@3.9.7/dist/jsmediatags.min.js"></script>
  <script src="script.js"></script>
</div>

</body>
</html>